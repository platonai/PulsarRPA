# ğŸ§­ ç‰ˆæœ¬å·å‘½åç­–ç•¥ç¤ºä¾‹ï¼ˆVersioning Strategy Guideï¼‰

> æœ¬æ–‡æ¡£å®šä¹‰é¡¹ç›®çš„ç‰ˆæœ¬å·å‘½åè§„èŒƒï¼ŒåŸºäº **è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioning 2.0.0ï¼‰**ï¼Œå¹¶ç»“åˆ GitHubã€CI/CDã€åŒ…ç®¡ç†ä¸ Docker çš„å·¥ç¨‹å®è·µã€‚

---

## ğŸ§© ä¸€ã€ç‰ˆæœ¬å·æ ¼å¼

ç‰ˆæœ¬å·åŸºæœ¬æ ¼å¼ï¼š

```

MAJOR.MINOR.PATCH[-PRERELEASE][+BUILD]

```

ç¤ºä¾‹ï¼š

```

1.2.3
1.2.3-beta.2
1.2.3+build.20251012
1.2.3-rc.1+sha.5114f85

```

| æ®µ | å«ä¹‰ |
|----|------|
| **MAJOR** | ä¸»ç‰ˆæœ¬å·ï¼Œéå…¼å®¹æ€§å˜æ›´æ—¶é€’å¢ |
| **MINOR** | æ¬¡ç‰ˆæœ¬å·ï¼Œå‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢ |
| **PATCH** | ä¿®è®¢å·ï¼Œå‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®å¤ |
| **PRERELEASE** | ï¼ˆå¯é€‰ï¼‰é¢„å‘å¸ƒæ ‡è¯†ï¼Œå¦‚ alpha/beta/rc |
| **BUILD** | ï¼ˆå¯é€‰ï¼‰æ„å»ºå…ƒæ•°æ®ï¼Œå¦‚ Git æäº¤å·ã€æ„å»ºæµæ°´å·ç­‰ |

---

## ğŸš€ äºŒã€é¢„å‘å¸ƒç‰ˆæœ¬ï¼ˆPre-releaseï¼‰

> ç”¨äºè¡¨ç¤ºä¸ç¨³å®šç‰ˆæœ¬ï¼Œé€šå¸¸åœ¨æ­£å¼ç‰ˆä¹‹å‰çš„æµ‹è¯•é˜¶æ®µã€‚

| æ ‡è¯† | ç¤ºä¾‹ | å«ä¹‰ |
|------|------|------|
| `alpha` | `2.0.0-alpha.1` | å†…æµ‹ç‰ˆæœ¬ï¼ŒåŠŸèƒ½ä¸å®Œæ•´ |
| `beta` | `2.0.0-beta.2` | å…¬æµ‹ç‰ˆæœ¬ï¼ŒåŠŸèƒ½åŸºæœ¬å®Œæˆ |
| `rc` | `2.0.0-rc.1` | å‘å¸ƒå€™é€‰ç‰ˆæœ¬ï¼Œå¦‚æ— é—®é¢˜å³ä¸ºæ­£å¼ç‰ˆ |

æ’åºè§„åˆ™ç¤ºä¾‹ï¼š

```

2.0.0-alpha.1 < 2.0.0-alpha.2 < 2.0.0-beta < 2.0.0-rc.1 < 2.0.0

```

---

## ğŸ§± ä¸‰ã€æ„å»ºå…ƒæ•°æ®ï¼ˆBuild Metadataï¼‰

> ç”¨äºæ ‡è¯†æ„å»ºä¿¡æ¯ï¼Œä¸å½±å“ç‰ˆæœ¬æ’åºã€‚

| ç¤ºä¾‹ | å«ä¹‰ |
|-------|------|
| `1.0.0+build.457` | ç¬¬ 457 æ¬¡ CI/CD æ„å»º |
| `1.0.0+sha.5114f85` | å¯¹åº” Git æäº¤å· |
| `1.0.0-beta+staging` | beta ç‰ˆæœ¬åœ¨ staging ç¯å¢ƒæ„å»º |
| `1.0.0+20251012` | æ„å»ºäº 2025-10-12 |

> âš ï¸ æ¯”è¾ƒç‰ˆæœ¬æ—¶ï¼Œ`+` åçš„éƒ¨åˆ†ä¼šè¢«å¿½ç•¥ï¼š  
> `1.0.0+build.1 == 1.0.0+build.2`

---

## ğŸ§° å››ã€Git æ ‡ç­¾ï¼ˆTagï¼‰ä¸ Release å‘½å

### æ¨èæ ¼å¼
```

vMAJOR.MINOR.PATCH

```

ç¤ºä¾‹ï¼š
```

v1.4.2
v2.0.0-beta.1
v2.0.0+sha.5114f85

```

GitHub ä¼šè‡ªåŠ¨å°†ä»¥ `v` å¼€å¤´çš„æ ‡ç­¾è¯†åˆ«ä¸ºç‰ˆæœ¬å‘å¸ƒç‚¹ã€‚

### æµ®åŠ¨æ ‡ç­¾ï¼ˆå¯é€‰ï¼‰
ä¸ºäº†ç®€åŒ–å¼•ç”¨ï¼Œå¯ä»¥ä¸ºä¸»ç‰ˆæœ¬æ‰“â€œæµ®åŠ¨æ ‡ç­¾â€ï¼š
```

v1 â†’ v1.2.3
v2 â†’ v2.0.0-rc.1

````

ä¾‹å¦‚ï¼š
```yaml
uses: org/action@v1
````

ä¼šè‡ªåŠ¨è·Ÿéšæœ€æ–°çš„ `v1.x.x` ç‰ˆæœ¬ã€‚

---

## âš™ï¸ äº”ã€GitHub Actions è‡ªåŠ¨ç‰ˆæœ¬åŒ–ç­–ç•¥

ä½¿ç”¨ **Conventional Commits** + **semantic-release** æˆ– **release-please** è‡ªåŠ¨ç®¡ç†ç‰ˆæœ¬ã€‚

### 1ï¸âƒ£ Commit Message ç¤ºä¾‹

| ç±»å‹                           | ç¤ºä¾‹                     | ç‰ˆæœ¬å˜åŒ–  |
| ---------------------------- | ---------------------- | ----- |
| `fix:`                       | `fix: ä¿®å¤ç™»å½•é”™è¯¯`          | PATCH |
| `feat:`                      | `feat: æ”¯æŒ OAuth ç™»å½•`    | MINOR |
| `feat!` æˆ– `BREAKING CHANGE:` | `feat!: é‡æ„ APIï¼Œä¸å…¼å®¹æ—§ç‰ˆæœ¬` | MAJOR |

### 2ï¸âƒ£ è‡ªåŠ¨ç”Ÿæˆ Tag ä¸ Release

å¯åœ¨ `.github/workflows/release.yml` ä¸­é…ç½®ï¼š

```yaml
name: Release
on:
  push:
    branches: [main]

jobs:
  release:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: google-github-actions/release-please-action@v4
        with:
          release-type: maven
          package-name: pulsar-core
```

---

## ğŸ§ª å…­ã€ä¸åŒé˜¶æ®µçš„ç‰ˆæœ¬å‘½åç¤ºä¾‹

| é˜¶æ®µ   | ç¤ºä¾‹ç‰ˆæœ¬                      | è¯´æ˜       |
| ---- | ------------------------- | -------- |
| å¼€å‘å¿«ç…§ | `2.0.0-alpha.1+build.001` | å†…æµ‹ç¬¬ä¸€ç‰ˆ    |
| å…¬æµ‹ç‰ˆ  | `2.0.0-beta.3+sha.abc123` | beta ç¬¬ä¸‰ç‰ˆ |
| å€™é€‰ç‰ˆ  | `2.0.0-rc.1+build.045`    | å¯èƒ½æˆä¸ºæ­£å¼ç‰ˆ  |
| ç¨³å®šç‰ˆ  | `2.0.0`                   | æ­£å¼å‘å¸ƒ     |
| ä¿®å¤ç‰ˆ  | `2.0.1`                   | bug ä¿®å¤   |

---

## ğŸ§© ä¸ƒã€Docker / Maven / NPM ç¤ºä¾‹

| å·¥å…·         | æ¨èå‘½å                | ç¤ºä¾‹                                |
| ---------- | ------------------- | --------------------------------- |
| **Docker** | `image:tag`         | `myapp:2.0.0-rc.1+sha.5114f85`    |
| **Maven**  | `<version>`         | `<version>2.0.0-beta.2</version>` |
| **NPM**    | `npm version patch` | è‡ªåŠ¨ç”Ÿæˆ `1.4.3`                      |

---

## ğŸ§­ å…«ã€ç‰ˆæœ¬æ’åºæ€»ç»“

| ä¼˜å…ˆçº§ | ç¤ºä¾‹              | è¯´æ˜    |
| --- | --------------- | ----- |
| 1ï¸âƒ£ | `2.0.0`         | æ­£å¼ç‰ˆæœ€é«˜ |
| 2ï¸âƒ£ | `2.0.0-rc.1`    | å‘å¸ƒå€™é€‰  |
| 3ï¸âƒ£ | `2.0.0-beta.3`  | å…¬æµ‹ç‰ˆ   |
| 4ï¸âƒ£ | `2.0.0-alpha.2` | å†…æµ‹ç‰ˆ   |
| 5ï¸âƒ£ | `2.0.0-alpha.1` | åˆå§‹å¼€å‘ç‰ˆ |

---

## ğŸ§¾ ä¹ã€CHANGELOG è§„èŒƒï¼ˆæ¨èï¼‰

é…åˆ [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)ï¼š

```markdown
## [2.0.0] - 2025-10-12
### Added
- æ–°å¢ OAuth ç™»å½•æ”¯æŒ
- å¼•å…¥æ–°çš„å‘½ä»¤æ‰§è¡Œå¼•æ“

### Changed
- é‡æ„ç”¨æˆ·è®¤è¯æ¨¡å—

### Fixed
- ä¿®å¤ä¼šè¯è¿‡æœŸæœªåˆ·æ–°é—®é¢˜
```

---

## âœ… åã€æ€»ç»“

| é¡¹ç›®é˜¶æ®µ   | ç‰ˆæœ¬å‘½å              | æ˜¯å¦å…¬å¼€ |
| ------ | ----------------- | ---- |
| å†…éƒ¨å¼€å‘   | `x.y.z-alpha.n`   | å¦    |
| å†…éƒ¨æµ‹è¯•   | `x.y.z-beta.n`    | å¦    |
| å¤–éƒ¨æµ‹è¯•   | `x.y.z-rc.n`      | æ˜¯    |
| æ­£å¼å‘å¸ƒ   | `x.y.z`           | æ˜¯    |
| æŒç»­é›†æˆæ„å»º | `x.y.z+build.xxx` | å¯é€‰   |

---

> ğŸ“Œ **æœ€ä½³å®è·µï¼š**
>
> * ä½¿ç”¨ `vMAJOR.MINOR.PATCH` æ ¼å¼æ‰“ tag
> * ä½¿ç”¨ `semantic-release` æˆ– `release-please` è‡ªåŠ¨ç®¡ç†ç‰ˆæœ¬
> * ä½¿ç”¨é¢„å‘å¸ƒæ®µæ§åˆ¶ç°åº¦ä¸æµ‹è¯•èŠ‚å¥
> * åœ¨ CI/CD ä¸­é™„åŠ æ„å»ºå…ƒæ•°æ®ä»¥è¿½è¸ªæ„å»ºæ¥æº

---
