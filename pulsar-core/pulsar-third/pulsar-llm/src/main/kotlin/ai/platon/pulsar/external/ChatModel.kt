package ai.platon.pulsar.external

import ai.platon.pulsar.dom.FeaturedDocument
import org.jsoup.nodes.Element

interface ChatModel {
    val settings: ChatModelSettings

    /**
     * Generates a response from the model based on a sequence of messages.
     * Typically, the sequence contains messages in the following order:
     * System (optional) - User - AI - User - AI - User ...
     *
     * @return The response generated by the model.
     */
    fun call(userMessage: String): ModelResponse
    
    /**
     * Generates a response from the model based on a sequence of messages.
     * Typically, the sequence contains messages in the following order:
     * System (optional) - User - AI - User - AI - User ...
     *
     * @param userMessage The user message.
     * @param systemMessage The system message.
     * @return The response generated by the model.
     */
    fun call(userMessage: String, systemMessage: String): ModelResponse

    /**
     * Call the model to generate a response based on a sequence of messages and attachment.
     * Typically, the sequence contains messages in the following order:
     * System (optional) - User - AI - User - AI - User ...
     *
     * @param userMessage The user message.
     * @param systemMessage The system message.
     * @param attachment The attachment in base64 format.
     * @param attachment The media type of the attachment.
     * @return The response generated by the model.
     */
    fun call(userMessage: String, systemMessage: String, attachment: String, mediaType: String): ModelResponse

    /**
     * Generates a response from the model based on a sequence of messages.
     * Typically, the sequence contains messages in the following order:
     * System (optional) - User - AI - User - AI - User ...
     *
     * @param document An array of messages.
     * @return The response generated by the model.
     */
    fun call(document: FeaturedDocument, prompt: String): ModelResponse
    
    /**
     * Generates a response from the model based on a sequence of messages.
     * Typically, the sequence contains messages in the following order:
     * System (optional) - User - AI - User - AI - User ...
     *
     * @param ele The Element to ask.
     * @return The response generated by the model.
     */
    fun call(ele: Element, prompt: String): ModelResponse
}
